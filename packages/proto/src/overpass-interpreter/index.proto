syntax = "proto3";

import "lib/openstreetmap.proto";
import "lib/geospatial.proto";

package OverpassInterpreter;

service OverpassInterpreter {
  rpc ShortRangeNamed(QueryParameters) returns (stream ShortRangeNamedResult);
  rpc WikidataIdsInRange(QueryParameters) returns (stream WikidataId);
  rpc PoiMetadata(PoiMetadataParameters) returns (stream ShortRangeNamedResult);
  rpc PoiWikidataId(PoiMetadataParameters) returns (stream WikidataId);
}

message QueryParameters {
  Geospatial.Coordinates coordinates = 1;
  double range = 2;
}

message PoiMetadataParameters {
  int64 id = 1;
}

message ShortRangeNamedResult {
  oneof result {
    OpenStreetMap.Node node = 1;
    OpenStreetMap.Way way = 2;
    OpenStreetMap.Relation relation = 3;
  }
}

message WikidataId {
  string id = 1;
}
