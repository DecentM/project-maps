project:
  name: "proto"
  description: "Proto definitions for the project"

tasks:
  up:
    command:
      - nodemon
      - -q
      - -x
      - pnpm moon
      - -e
      - proto
      - --
      - proto:build
    options:
      cache: false
      persistent: true

  build:
    inputs:
      - src/**/*.proto
      - package.json
      - buf.yaml
      - buf.gen.yaml
    outputs:
      - dist
    command: pnpm
    args:
      - buf
      - generate
    options:
      cache: true
      persistent: false
